<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฏููู ููุตุงุช ููุงูุขุช ุงูุฃุฎุทุงุก ุงูููุซููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Subtle Accents -->
    <!-- Application Structure Plan: The application is structured as a single-page dashboard. It starts with a clear title and introduction addressing the user's primary concern (payment security). The core is an interactive "Platform Explorer" with filter controls and a dynamic card grid, allowing users to compare platforms based on what matters most to them (reliability, beginner-friendly, specialty). This is more usable than a static table as it puts the user in control. Following the explorer, two interactive charts provide a high-level visual comparison of reliability and platform specializations. The page then delves into "Essential Guides" for securing payments (KYC, reporting) and concludes with actionable recommendations. This structure guides the user from broad comparison to detailed, practical advice, directly addressing their goal of finding a trustworthy platform and getting paid. -->
    <!-- Visualization & Content Choices: 
        - Platform Data -> Goal: Compare/Filter -> Viz: Interactive Card Grid (HTML/JS) -> Interaction: Users can filter by reliability, beginner-friendly, and specialty. Cards are clickable to show more details. Justification: Superior to a static table for user-driven exploration.
        - Reliability/Dispute Ratings -> Goal: Compare -> Viz: Bar Chart (Chart.js/Canvas) -> Interaction: Hover for tooltips with exact ratings. Justification: Provides an immediate, clear visual comparison of platform trustworthiness.
        - Platform Specialization -> Goal: Inform/Organize -> Viz: Donut Chart (Chart.js/Canvas) -> Interaction: Hover to see platform counts per category. Justification: Quickly shows the distribution of platform types in the market.
        - Key Advice (KYC, Reporting) -> Goal: Inform/Guide -> Viz: Styled Text Blocks/Accordions (HTML/Tailwind) -> Interaction: Click to expand/collapse. Justification: Organizes detailed text content cleanly, preventing information overload.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #FDFBF7;
            color: #3D352E;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 500;
            font-size: 0.75rem;
        }
        .tag-high { background-color: #E6F3E6; color: #2E7D32; }
        .tag-medium { background-color: #FFF3E0; color: #EF6C00; }
        .tag-low { background-color: #FFEBEE; color: #C62828; }
        .tag-specialty { background-color: #E3F2FD; color: #1565C0; }
        .tag-beginner { background-color: #F3E5F5; color: #6A1B9A; }
        .btn-filter {
            transition: all 0.2s ease-in-out;
        }
        .btn-filter.active {
            background-color: #A1887F;
            color: #FFFFFF;
            transform: scale(1.05);
        }
        .btn-filter:not(.active) {
            background-color: #EFEBE9;
            color: #5D4037;
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .details-content.show {
            max-height: 200px; /* Adjust as needed based on content */
            transition: max-height 0.5s ease-in;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #A1887F;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 md:p-8">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-[#5D4037] mb-4">ุฏูููู ูุงุฎุชูุงุฑ ููุตุฉ Bug Bounty ุงูููุซููุฉ</h1>
            <p class="max-w-3xl mx-auto text-lg text-[#795548]">
                ุงูููู ุงูุฃูุจุฑ ููู ุจุงุญุซ ุฃููู ูู ุถูุงู ุงูุญุตูู ุนูู ููุงุจู ูุงุฏู ูุฌููุฏู. ูุฐุง ุงูุชุทุจูู ุงูุชูุงุนูู ูุญูู ุฃูุถู ุงูููุตุงุช ููุฑูุฒ ุนูู ููุซูููุฉ ุงูุฏูุนุ ุดูุงููุฉ ุงูุฅุฌุฑุงุกุงุชุ ูุขููุงุช ุญู ุงููุฒุงุนุงุช ููุณุงุนุฏุชู ุนูู ุงุชุฎุงุฐ ูุฑุงุฑ ูุณุชููุฑ ูุชุฌูุจ ุฃู ูุญุงููุงุช ุงุญุชูุงู.
            </p>
        </header>

        <main>
            <!-- Platform Explorer Section -->
            <section id="explorer" class="bg-white rounded-2xl shadow-lg p-6 md:p-8 mb-12">
                <h2 class="text-3xl font-bold text-center mb-2 text-[#5D4037]">ุงุณุชูุดู ุงูููุตุงุช</h2>
                <p class="text-center text-gray-600 mb-8">ุงุณุชุฎุฏู ุงูููุงุชุฑ ุงูุชุงููุฉ ูุชุตููู ุงูููุตุงุช ุญุณุจ ุฃููููุงุชู.</p>
                
                <div id="filters" class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
                    <button class="btn-filter font-semibold py-2 px-4 rounded-full active" data-filter="all">ุงููู</button>
                    <button class="btn-filter font-semibold py-2 px-4 rounded-full" data-filter="high-reliability">ููุซูููุฉ ุฏูุน ุนุงููุฉ</button>
                    <button class="btn-filter font-semibold py-2 px-4 rounded-full" data-filter="beginner-friendly">ููุงุณุจุฉ ูููุจุชุฏุฆูู</button>
                    <button class="btn-filter font-semibold py-2 px-4 rounded-full" data-filter="web3">ูุชุฎุตุตุฉ ูู Web3</button>
                </div>

                <div id="platform-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Platform cards will be dynamically inserted here -->
                </div>
            </section>

            <!-- Visual Comparison Section -->
            <section id="charts" class="mb-12">
                 <h2 class="text-3xl font-bold text-center mb-8 text-[#5D4037]">ููุงุฑูุฉ ูุฑุฆูุฉ</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-center mb-4 text-[#6D4C41]">ุชูููู ุงูููุซูููุฉ ูุญู ุงููุฒุงุนุงุช</h3>
                        <div class="chart-container">
                            <canvas id="reliabilityChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-lg p-6">
                         <h3 class="text-xl font-bold text-center mb-4 text-[#6D4C41]">ุชุฎุตุตุงุช ุงูููุตุงุช</h3>
                        <div class="chart-container">
                            <canvas id="specialtyChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gemini API Features Section -->
            <section id="gemini-features" class="bg-white rounded-2xl shadow-lg p-6 md:p-8 mb-12">
                <h2 class="text-3xl font-bold text-center mb-8 text-[#5D4037]">ุฃุฏูุงุช ูุณุงุนุฏุฉ</h2>
                
                <!-- Vulnerability Idea Generator -->
                <div class="mb-10 p-6 bg-[#F5F5F5] rounded-lg shadow-inner">
                    <h3 class="text-2xl font-bold mb-4 text-[#6D4C41]"> ูููุฏ ุฃููุงุฑ ุงูุซุบุฑุงุช</h3>
                    <p class="text-gray-700 mb-4">ุงุฎุชุฑ ุชุฎุตุต ุงูููุตุฉ ุฃู ููุน ุงููุฏู ููุญุตูู ุนูู ุงูุชุฑุงุญุงุช ูุซุบุฑุงุช ูุญุชููุฉ ููุจุญุซ ุนููุง.</p>
                    <div class="flex flex-col sm:flex-row gap-4 mb-4">
                        <select id="platformSpecialtySelect" class="flex-grow p-3 border border-gray-300 rounded-lg bg-white text-gray-700">
                            <option value="">ุงุฎุชุฑ ุชุฎุตุต ุงูููุตุฉ</option>
                            <option value="ุนุงู">ุนุงู</option>
                            <option value="Web3">Web3</option>
                            <option value="ูุชุฎุตุต">ูุชุฎุตุต</option>
                            <option value="PTaaS">PTaaS</option>
                            <option value="ุบูุฑ ุฑุจุญูุฉ">ุบูุฑ ุฑุจุญูุฉ</option>
                        </select>
                        <input type="text" id="targetTypeInput" placeholder="ุฃู ุฃุฏุฎู ููุน ุงููุฏู (ูุซุงู: ุชุทุจูู ููุจุ ุนูุฏ ุฐูู)" class="flex-grow p-3 border border-gray-300 rounded-lg text-gray-700" />
                    </div>
                    <button id="generateVulnerabilityIdeasBtn" class="w-full bg-[#A1887F] text-white font-semibold py-3 px-6 rounded-full hover:bg-[#8D6E63] transition-colors">
                        <span id="generateVulnerabilityIdeasBtnText">ุชูููุฏ ุงูุฃููุงุฑ</span>
                        <span id="generateVulnerabilityIdeasSpinner" class="loading-spinner hidden"></span>
                    </button>
                    <div id="vulnerabilityIdeasOutput" class="mt-6 p-4 bg-white border border-gray-200 rounded-lg text-gray-800 min-h-[80px] flex items-center justify-center text-center">
                        <p class="text-gray-500">ุณูุธูุฑ ููุง ุงูุชุฑุงุญุงุช ุงูุซุบุฑุงุช...</p>
                    </div>
                </div>

                <!-- Vulnerability Impact Assessor -->
                <div class="mb-10 p-6 bg-[#F5F5F5] rounded-lg shadow-inner">
                    <h3 class="text-2xl font-bold mb-4 text-[#6D4C41]"> ููููู ุชุฃุซูุฑ ุงูุซุบุฑุฉ</h3>
                    <p class="text-gray-700 mb-4">ุฃุฏุฎู ูุตููุง ููุฌุฒูุง ููุซุบุฑุฉ ูุชูุฏูุฑ ุชุฃุซูุฑูุง ุงููุญุชูู.</p>
                    <textarea id="vulnerabilityDescriptionInput" rows="4" class="w-full p-3 border border-gray-300 rounded-lg text-gray-700" placeholder="ูุซุงู: XSS ููุนูุณ ูู ุญูู ุงุณู ุงููุณุชุฎุฏู ุจุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู..."></textarea>
                    <button id="assessVulnerabilityImpactBtn" class="w-full bg-[#A1887F] text-white font-semibold py-3 px-6 rounded-full hover:bg-[#8D6E63] transition-colors mt-4">
                        <span id="assessVulnerabilityImpactBtnText">ุชูููู ุงูุชุฃุซูุฑ</span>
                        <span id="assessVulnerabilityImpactSpinner" class="loading-spinner hidden"></span>
                    </button>
                    <div id="vulnerabilityImpactOutput" class="mt-6 p-4 bg-white border border-gray-200 rounded-lg text-gray-800 min-h-[80px] flex items-center justify-center text-center">
                        <p class="text-gray-500">ุณูุธูุฑ ููุง ุชูููู ุชุฃุซูุฑ ุงูุซุบุฑุฉ...</p>
                    </div>
                </div>

                <!-- Report Title/Summary Generator -->
                <div class="mb-10 p-6 bg-[#F5F5F5] rounded-lg shadow-inner">
                    <h3 class="text-2xl font-bold mb-4 text-[#6D4C41]"> ูููุฏ ุนููุงู ูููุฎุต ุงูุชูุฑูุฑ</h3>
                    <p class="text-gray-700 mb-4">ุงูุตู ูุต ุชูุฑูุฑ ุงูุซุบุฑุฉ ูุงููุงู ููุญุตูู ุนูู ุงูุชุฑุงุญุงุช ูุนูุงููู ูููุฎุตุงุช.</p>
                    <textarea id="fullReportBodyInput" rows="8" class="w-full p-3 border border-gray-300 rounded-lg text-gray-700" placeholder="ุงูุตู ูุต ุชูุฑูุฑ ุงูุซุบุฑุฉ ุงูููุตู ููุง..."></textarea>
                    <button id="generateReportTitleSummaryBtn" class="w-full bg-[#A1887F] text-white font-semibold py-3 px-6 rounded-full hover:bg-[#8D6E63] transition-colors mt-4">
                        <span id="generateReportTitleSummaryBtnText">ุชูููุฏ ุงูุนููุงู ูุงูููุฎุต</span>
                        <span id="generateReportTitleSummarySpinner" class="loading-spinner hidden"></span>
                    </button>
                    <div id="reportTitleSummaryOutput" class="mt-6 p-4 bg-white border border-gray-200 rounded-lg text-gray-800 min-h-[80px] flex items-center justify-center text-center">
                        <p class="text-gray-500">ุณูุธูุฑ ููุง ุงูุนูุงููู ูุงูููุฎุตุงุช ุงูููุชุฑุญุฉ...</p>
                    </div>
                </div>

                <!-- Report Quality Assessor (Existing) -->
                <div class="p-6 bg-[#F5F5F5] rounded-lg shadow-inner">
                    <h3 class="text-2xl font-bold mb-4 text-[#6D4C41]"> ูุณุงุนุฏ ุฌูุฏุฉ ุงูุชูุฑูุฑ</h3>
                    <p class="text-gray-700 mb-4">ุงูุตู ูุณูุฏุฉ ุชูุฑูุฑ ุงูุซุบุฑุฉ ููุง ููุญุตูู ุนูู ููุงุญุธุงุช ุญูู ุฌูุฏุชูุง ูุชุญุณูููุง.</p>
                    <textarea id="reportDraftTextarea" rows="8" class="w-full p-3 border border-gray-300 rounded-lg text-gray-700" placeholder="ุงูุตู ูุณูุฏุฉ ุชูุฑูุฑ ุงูุซุบุฑุฉ ููุง..."></textarea>
                    <button id="assessReportQualityBtn" class="w-full bg-[#A1887F] text-white font-semibold py-3 px-6 rounded-full hover:bg-[#8D6E63] transition-colors mt-4">
                        <span id="assessReportQualityBtnText">ุชูููู ุงูุฌูุฏุฉ</span>
                        <span id="assessReportQualitySpinner" class="loading-spinner hidden"></span>
                    </button>
                    <div id="reportQualityOutput" class="mt-6 p-4 bg-white border border-gray-200 rounded-lg text-gray-800 min-h-[80px] flex items-center justify-center text-center">
                        <p class="text-gray-500">ุณุชุธูุฑ ููุง ููุงุญุธุงุช ุญูู ุฌูุฏุฉ ุงูุชูุฑูุฑ...</p>
                    </div>
                </div>
            </section>


            <!-- Essential Guides Section -->
            <section id="guides" class="bg-white rounded-2xl shadow-lg p-6 md:p-8 mb-12">
                <h2 class="text-3xl font-bold text-center mb-8 text-[#5D4037]">ุฅุฑุดุงุฏุงุช ุฃุณุงุณูุฉ ูุถูุงู ูุณุชุญูุงุชู</h2>
                <div class="space-y-6 max-w-4xl mx-auto">
                    <div class="bg-[#F5F5F5] p-5 rounded-lg">
                        <h3 class="font-bold text-xl mb-2 text-[#5D4037]">๐ ุฌูุฏุฉ ุงูุชูุฑูุฑ ูู ููุชุงุญู ููุฏูุน</h3>
                        <p class="text-gray-700">ุงูุชูุฑูุฑ ุงููุงุถุญ ูุงูููุตู ุงูุฐู ูุญุชูู ุนูู ุฎุทูุงุช ุฏูููุฉ ูุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุซุบุฑุฉุ ูููุทุงุช ุดุงุดุฉุ ูุดุฑุญ ููุชุฃุซูุฑุ ูุณุฑูุน ุนูููุฉ ุงููุฑุงุฌุนุฉ ูุงูุฏูุน. ุงูููุตุงุช ุชูุฏุฑ ุงูุชูุงุฑูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ ูุชูุงูุฆูุง ุจุดูู ุฃูุถู. ุงุณุชุซูุฑ ุงูููุช ูู ุชูุฑูุฑูุ ููู ุงุณุชุซูุงุฑ ูู ููุงูุฃุชู.</p>
                    </div>
                    <div class="bg-[#F5F5F5] p-5 rounded-lg">
                        <h3 class="font-bold text-xl mb-2 text-[#5D4037]">๐ ููู ุดุฑูุท ุงูุฏูุน (KYC ูุงูุถุฑุงุฆุจ)</h3>
                        <p class="text-gray-700">ูุนุธู ุงูููุตุงุช ุชุทูุจ ุงูุชุญูู ูู ุงููููุฉ (KYC) ูุจู ุงูุฏูุน. ุฌููุฒ ุฃูุฑุงูู ุงูุซุจูุชูุฉ ูููุงุฐุฌู ุงูุถุฑูุจูุฉ ูุณุจูุงู. ุนุฏู ุงูุงูุชุซุงู ููุฐู ุงูููุงุนุฏ ุงูุชูุธูููุฉ ูู ุณุจุจ ุดุงุฆุน ูุชุฃุฎุฑ ุฃู ููุฏุงู ุงููุฏููุนุงุชุ ููู ููุณ "ุงุญุชูุงูุงู" ูู ุงูููุตุฉ ุจู ุงูุชุฒุงูุงู ุจุงูููุงููู ุงููุงููุฉ.</p>
                    </div>
                     <div class="bg-[#F5F5F5] p-5 rounded-lg">
                        <h3 class="font-bold text-xl mb-2 text-[#5D4037]">โ๏ธ ูุงุฐุง ุชูุนู ุนูุฏ ุญุฏูุซ ุฎูุงูุ</h3>
                        <p class="text-gray-700">ุฅุฐุง ุดุนุฑุช ุฃู ุชูุฑูุฑู ููููู ุจุดูู ุบูุฑ ุนุงุฏูุ ุงุจุฏุฃ ุฏุงุฆูุงู ุจุนูููุฉ ุงููุณุงุทุฉ ุงูุฏุงุฎููุฉ ููููุตุฉ. ุงุญุชูุธ ุจุชูุซูู ูุงูู ูุฌููุน ุงุชุตุงูุงุชู. ูููุจุงูุบ ุงููุจูุฑุฉุ ุงุฎุชุฑ ููุตุฉ ูุซู Immunefi ุงูุชู ุชููุฑ ุชุญูููุงู ููุฒูุงู ูุงูููุงูุ ููุฐุง ูููุฑ ุฃููู ุดุจูุฉ ุฃูุงู ูู.</p>
                    </div>
                </div>
            </section>

            <!-- Conclusion Section -->
            <section id="conclusion" class="text-center">
                <h2 class="text-3xl font-bold mb-4 text-[#5D4037]">ุชูุตูุงุช ููุงุฆูุฉ</h2>
                <p class="max-w-3xl mx-auto text-lg text-[#795548] mb-6">
                    ุงูุฎูุงุตุฉ ูู ุฃู ููุซูููุฉ ุงูุฏูุน ูุณุคูููุฉ ูุดุชุฑูุฉ. ุงุฎุชุฑ ููุตุฉ ุดูุงูุฉุ ุงููู ููุงุนุฏูุง ุฌูุฏุงูุ ูุฏู ุชูุงุฑูุฑ ุงุญุชุฑุงููุฉุ ููู ุงุณุชุจุงููุงู ูู ุงูุชูุงุตู. ุจุงุณุชุฎุฏุงู ูุฐุง ุงูููุฌุ ุณุชููู ุจุดูู ูุจูุฑ ูู ูุฎุงุทุฑ ุงููุฒุงุนุงุช ูุชุจูู ูุณูุฑุฉ ููููุฉ ูุงุฌุญุฉ ููุฑุจุญุฉ ูู ุนุงูู ููุงูุขุช ุงูุฃุฎุทุงุก.
                </p>
                <a href="#explorer" class="bg-[#A1887F] text-white font-bold py-3 px-8 rounded-full hover:bg-[#8D6E63] transition-colors">ุงุจุฏุฃ ุงุณุชูุดุงู ุงูููุตุงุช ุงูุขู</a>
            </section>
        </main>
        
        <footer class="text-center mt-12 text-sm text-gray-500">
            <p>ุชู ุฅูุดุงุก ูุฐุง ุงูุชุทุจูู ุงูุชูุงุนูู ุจูุงุกู ุนูู ุชูุฑูุฑ "ุฃูุถู 10 ููุตุงุช ูููุงูุขุช ุงูุฃุฎุทุงุก".</p>
            <p>&copy; 2025 - ุฏููู ุงูุจุงุญุซ ุงูุฃููู</p>
        </footer>

    </div>

    <script>
        // Function to sanitize input to prevent XSS
        function sanitizeInput(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#x27;',
                '/': '&#x2F;',
            };
            return text.replace(/[&<>"'/]/g, function (m) { return map[m]; });
        }

        const platformData = [
            {
                name: "HackerOne",
                specialty: "ุนุงู",
                reliability: "ุฌูุฏุฉ",
                reliabilityScore: 4,
                disputeEffectiveness: 4,
                beginnerFriendly: true,
                pros: "ุฃูุจุฑ ูุฌุชูุนุ ุชููุน ุจุฑุงูุฌ ูุงุฆูุ ุชุฏุฑูุจ ุดุงูู.",
                cons: "ุงุญุชูุงู ุจุทุก ุงูุงุณุชุฌุงุจุฉ ูุงูุชุญูู ุจุณุจุจ ุงูุญุฌู ุงููุจูุฑ.",
                url: "https://www.hackerone.com"
            },
            {
                name: "Bugcrowd",
                specialty: "ุนุงู",
                reliability: "ุฌูุฏุฉ ุฌุฏูุง",
                reliabilityScore: 4.5,
                disputeEffectiveness: 4.5,
                beginnerFriendly: true,
                pros: "ูุฌุชูุน ููู ูุฏุงุนูุ ุชุตููู ููุญุฏ ููุซุบุฑุงุช (VRT).",
                cons: "ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฏ ุชุญุชุงุฌ ูุจุนุถ ุงูุชุญุณููุงุช.",
                url: "https://www.bugcrowd.com"
            },
            {
                name: "Intigriti",
                specialty: "ุนุงู",
                reliability: "ูุฎุชูุทุฉ",
                reliabilityScore: 3,
                disputeEffectiveness: 3,
                beginnerFriendly: true,
                pros: "ุญุถูุฑ ุฃูุฑูุจู ูููุ ุชุนููุถ ูุญุชูู ูู ุงูููุตุฉ ุนู ุงูุฃุฎุทุงุก.",
                cons: "ุชูุงุฑูุฑ ูุฌุชูุนูุฉ ุนู ุฅุตูุงุญุงุช ุตุงูุชุฉ ูุฑูุถ ุบูุฑ ุนุงุฏู ุฃุญูุงูุงู.",
                url: "https://www.intigriti.com"
            },
            {
                name: "YesWeHack",
                specialty: "ุนุงู",
                reliability: "ุฌูุฏุฉ ุฌุฏูุง",
                reliabilityScore: 4.5,
                disputeEffectiveness: 4.5,
                beginnerFriendly: true,
                pros: "ูุง ุชูุฌุฏ ุนูููุฉ ุนูู ุงูุณุญุจุ ุฏุนู ููุฑุฒ ููุชุงุฒ.",
                cons: "ูุชุทูุจุงุช KYC ุตุงุฑูุฉ ุฌุฏุงู ูุฏ ุชุณุจุจ ูุดุงูู ูุบูุฑ ุงูููุชุฒููู.",
                url: "https://www.yeswehack.com"
            },
            {
                name: "Synack Red Team",
                specialty: "ูุชุฎุตุต",
                reliability: "ุฌูุฏุฉ",
                reliabilityScore: 4,
                disputeEffectiveness: 3.5,
                beginnerFriendly: false,
                pros: "ูุฏููุนุงุช ุนุงููุฉ ุฌุฏุงูุ ููุงูุณุฉ ุฃูู (ุฏุนูุฉ ููุท).",
                cons: "ุญุตุฑูุฉ ูุชุชุทูุจ ูุญุตุงู ุตุงุฑูุงูุ ุจุนุถ ุงูููุงุญุธุงุช ุงูุณูุจูุฉ ุนูู ุงูุฏุนู.",
                url: "https://www.synack.com/red-team/"
            },
            {
                name: "Cobalt",
                specialty: "PTaaS",
                reliability: "ุฌูุฏุฉ",
                reliabilityScore: 3.5,
                disputeEffectiveness: 3,
                beginnerFriendly: false,
                pros: "ุจุฑุงูุฌ ุนุงููุฉ ุงูุชุฃุซูุฑุ ุฅููุงููุฉ ูุดุงุฑูุงุช ุทูููุฉ ุงูุฃุฌู.",
                cons: "ูุนูููุงุช ุฃูู ุชูุตููุงู ููุจุงุญุซูู ุนู ุขููุงุช ุงูุฏูุน ูุงููุฒุงุน.",
                url: "https://cobalt.io/"
            },
            {
                name: "HackenProof",
                specialty: "Web3",
                reliability: "ุฌูุฏุฉ",
                reliabilityScore: 3.5,
                disputeEffectiveness: 3,
                beginnerFriendly: true,
                pros: "ุฑุงุฆุฏุฉ ูู ุฃูู Web3ุ ูุฏููุนุงุช ุณุฑูุนุฉ ุจุงูุนููุงุช ุงููุดูุฑุฉ.",
                cons: "ุนูููุฉ ุณุญุจ 3%ุ ูููุฏ ุนูู ุงูุชุญูููุงุช ุงูุจูููุฉ ูุจุนุถ ุงูุฏูู.",
                url: "https://hackenproof.com/"
            },
            {
                name: "Open Bug Bounty",
                specialty: "ุบูุฑ ุฑุจุญูุฉ",
                reliability: "ุทูุนูุฉ",
                reliabilityScore: 1,
                disputeEffectiveness: 1,
                beginnerFriendly: true,
                pros: "ููุชุงุฒุฉ ูุจูุงุก ุงูุณูุนุฉ ูุงูุฎุจุฑุฉุ ูุฌุงููุฉ ูููุชูุญุฉ ููุฌููุน.",
                cons: "ุงูุฏูุน ุบูุฑ ูุถููู ููุนุชูุฏ ุนูู ุงุชูุงู ุทูุนู ูุน ุตุงุญุจ ุงููููุน.",
                url: "https://www.openbugbounty.org/"
            },
            {
                name: "Immunefi",
                specialty: "Web3",
                reliability: "ุนุงููุฉ ุฌุฏูุง",
                reliabilityScore: 5,
                disputeEffectiveness: 5,
                beginnerFriendly: false,
                pros: "ุฃุนูู ูุฏููุนุงุช ูู ุงูุตูุงุนุฉุ ูุธุงู ุชุญููู ููุฒู ูุงูููุงู.",
                cons: "ุจูุฆุฉ ุนุงููุฉ ุงููุฎุงุทุฑุ ุชูููุฉ ุงูุชุญููู ูุฑุชูุนุฉ ูููุฒุงุนุงุช.",
                url: "https://immunefi.com/"
            },
            {
                name: "Cyble",
                specialty: "ูุชุฎุตุต",
                reliability: "ุบูุฑ ูุถูููุฉ",
                reliabilityScore: 1.5,
                disputeEffectiveness: 1.5,
                beginnerFriendly: false,
                pros: "ูุฑุตุฉ ูููุณุงููุฉ ูู ุฐูุงุก ุงูุชูุฏูุฏุงุช ุงูุนุงููู.",
                cons: "ููุณุช ููุตุฉ ููุงูุขุช ุชูููุฏูุฉุ ุงูุฏูุน ุงููุงูู ููุณ ุงููุฏู ุงูุฃุณุงุณู.",
                url: "https://cyble.com/responsible-disclosure-program/"
            }
        ];

        const grid = document.getElementById('platform-grid');
        const filters = document.getElementById('filters');

        function getReliabilityClass(reliability) {
            if (['ุนุงููุฉ ุฌุฏูุง', 'ุฌูุฏุฉ ุฌุฏูุง'].includes(reliability)) return 'tag-high';
            if (['ุฌูุฏุฉ', 'ูุฎุชูุทุฉ'].includes(reliability)) return 'tag-medium';
            return 'tag-low';
        }

        function renderPlatforms(filter = 'all') {
            grid.innerHTML = '';
            const filteredData = platformData.filter(p => {
                if (filter === 'all') return true;
                if (filter === 'high-reliability') return ['ุนุงููุฉ ุฌุฏูุง', 'ุฌูุฏุฉ ุฌุฏูุง'].includes(p.reliability);
                if (filter === 'beginner-friendly') return p.beginnerFriendly;
                if (filter === 'web3') return p.specialty === 'Web3';
            });

            if (filteredData.length === 0) {
                grid.innerHTML = `<p class="text-center text-gray-500 col-span-full">ูุง ุชูุฌุฏ ููุตุงุช ุชุทุงุจู ูุฐุง ุงูููุชุฑ.</p>`;
                return;
            }

            filteredData.forEach(platform => {
                const card = document.createElement('div');
                card.className = 'card bg-[#FBFBFB] rounded-xl p-6 border border-gray-200 flex flex-col justify-between';
                card.innerHTML = `
                    <div>
                        <h3 class="text-2xl font-bold mb-3 text-[#6D4C41]">${sanitizeInput(platform.name)}</h3>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="tag ${getReliabilityClass(platform.reliability)}">ููุซูููุฉ ุงูุฏูุน: ${sanitizeInput(platform.reliability)}</span>
                            <span class="tag tag-specialty">${sanitizeInput(platform.specialty)}</span>
                            ${platform.beginnerFriendly ? '<span class="tag tag-beginner">ููุงุณุจุฉ ูููุจุชุฏุฆูู</span>' : ''}
                        </div>
                        <div class="details-content" id="details-${platform.name.replace(/\s/g, '')}">
                            <p class="mb-2"><strong class="font-semibold text-green-700">ุงูุฅูุฌุงุจูุงุช:</strong> ${sanitizeInput(platform.pros)}</p>
                            <p><strong class="font-semibold text-red-700">ุงูุณูุจูุงุช:</strong> ${sanitizeInput(platform.cons)}</p>
                        </div>
                    </div>
                    <div class="mt-4 flex flex-col sm:flex-row gap-3">
                        <button class="toggle-details-btn bg-[#EFEBE9] text-[#5D4037] font-semibold py-2 px-4 rounded-full hover:bg-[#D7CCC8] transition-colors flex-grow" data-target="details-${platform.name.replace(/\s/g, '')}">ุนุฑุถ ุงูุชูุงุตูู</button>
                        <a href="${sanitizeInput(platform.url)}" target="_blank" rel="noopener noreferrer" class="bg-[#A1887F] text-white font-semibold py-2 px-4 rounded-full hover:bg-[#8D6E63] transition-colors text-center flex-grow">ุฒูุงุฑุฉ ุงูููุตุฉ</a>
                    </div>
                `;
                grid.appendChild(card);
            });

            document.querySelectorAll('.toggle-details-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const targetId = e.target.dataset.target;
                    const detailsContent = document.getElementById(targetId);
                    detailsContent.classList.toggle('show');
                    if (detailsContent.classList.contains('show')) {
                        e.target.textContent = 'ุฅุฎูุงุก ุงูุชูุงุตูู';
                    } else {
                        e.target.textContent = 'ุนุฑุถ ุงูุชูุงุตูู';
                    }
                });
            });
        }

        filters.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                document.querySelector('.btn-filter.active').classList.remove('active');
                e.target.classList.add('active');
                renderPlatforms(e.target.dataset.filter);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderPlatforms();

            const reliabilityCtx = document.getElementById('reliabilityChart').getContext('2d');
            const reliabilityChart = new Chart(reliabilityCtx, {
                type: 'bar',
                data: {
                    labels: platformData.map(p => p.name),
                    datasets: [
                        {
                            label: 'ููุซูููุฉ ุงูุฏูุน',
                            data: platformData.map(p => p.reliabilityScore),
                            backgroundColor: 'rgba(161, 136, 127, 0.6)',
                            borderColor: 'rgba(161, 136, 127, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'ูุนุงููุฉ ุญู ุงููุฒุงุนุงุช',
                            data: platformData.map(p => p.disputeEffectiveness),
                            backgroundColor: 'rgba(61, 53, 46, 0.6)',
                            borderColor: 'rgba(61, 53, 46, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 5,
                            ticks: {
                                color: '#3D352E'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#3D352E'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#3D352E'
                            }
                        },
                        tooltip: {
                            titleFont: { family: 'Tajawal' },
                            bodyFont: { family: 'Tajawal' }
                        }
                    }
                }
            });

            const specialtyData = platformData.reduce((acc, p) => {
                acc[p.specialty] = (acc[p.specialty] || 0) + 1;
                return acc;
            }, {});

            const specialtyCtx = document.getElementById('specialtyChart').getContext('2d');
            const specialtyChart = new Chart(specialtyCtx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(specialtyData),
                    datasets: [{
                        label: 'ุนุฏุฏ ุงูููุตุงุช',
                        data: Object.values(specialtyData),
                        backgroundColor: [
                            'rgba(161, 136, 127, 0.7)',
                            'rgba(227, 242, 253, 0.7)',
                            'rgba(243, 229, 245, 0.7)',
                            'rgba(255, 235, 238, 0.7)',
                            'rgba(239, 235, 233, 0.7)'
                        ],
                        borderColor: [
                            '#A1887F',
                            '#1565C0',
                            '#6A1B9A',
                            '#C62828',
                            '#5D4037'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#3D352E'
                            }
                        },
                        tooltip: {
                            titleFont: { family: 'Tajawal' },
                            bodyFont: { family: 'Tajawal' }
                        }
                    }
                }
            });

            // Gemini API Integration Logic
            const generateVulnerabilityIdeasBtn = document.getElementById('generateVulnerabilityIdeasBtn');
            const platformSpecialtySelect = document.getElementById('platformSpecialtySelect');
            const targetTypeInput = document.getElementById('targetTypeInput');
            const vulnerabilityIdeasOutput = document.getElementById('vulnerabilityIdeasOutput');
            const generateVulnerabilityIdeasBtnText = document.getElementById('generateVulnerabilityIdeasBtnText');
            const generateVulnerabilityIdeasSpinner = document.getElementById('generateVulnerabilityIdeasSpinner');

            generateVulnerabilityIdeasBtn.addEventListener('click', async () => {
                const specialty = sanitizeInput(platformSpecialtySelect.value); // Sanitize input
                const targetType = sanitizeInput(targetTypeInput.value.trim()); // Sanitize input
                let prompt = "ุงูุชุฑุญ 5 ุฃููุงุฑ ูุซุบุฑุงุช ุฃูููุฉ (Bug Bounty ideas) ูุน ูุตู ููุฌุฒ ููู ููุฑุฉ.";

                if (specialty && targetType) {
                    prompt += ` ุจูุงุกู ุนูู ุชุฎุตุต ุงูููุตุฉ "${specialty}" ูููุน ุงููุฏู "${targetType}".`;
                } else if (specialty) {
                    prompt += ` ุจูุงุกู ุนูู ุชุฎุตุต ุงูููุตุฉ "${specialty}".`;
                } else if (targetType) {
                    prompt += ` ุจูุงุกู ุนูู ููุน ุงููุฏู "${targetType}".`;
                } else {
                    vulnerabilityIdeasOutput.innerHTML = '<p class="text-red-500">ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุชุฎุตุต ููุตุฉ ุฃู ุฅุฏุฎุงู ููุน ูุฏู.</p>';
                    return;
                }

                generateVulnerabilityIdeasBtnText.classList.add('hidden');
                generateVulnerabilityIdeasSpinner.classList.remove('hidden');
                vulnerabilityIdeasOutput.innerHTML = '<p class="text-gray-500 flex items-center justify-center"><span class="loading-spinner"></span> ุฌุงุฑู ุชูููุฏ ุงูุฃููุงุฑ...</p>';

                try {
                    const apiKey = "AIzaSyAJijq2Es_fHJwSyshTG9rjs3h5oO62k-I"; // <--- ุถุน ููุชุงุญ API ุงูุฎุงุต ุจู ููุง
                    
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent`;
                    
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    
                    const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 
                                    'Content-Type': 'application/json',
                                    'X-goog-api-key': apiKey 
                                },
                                body: JSON.stringify(payload)
                            });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = sanitizeInput(result.candidates[0].content.parts[0].text); // Sanitize output
                        vulnerabilityIdeasOutput.innerHTML = `<p>${text.replace(/\n/g, '<br>')}</p>`;
                    } else {
                        vulnerabilityIdeasOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ูู ุชูููุฏ ุงูุฃููุงุฑ. ุงูุฑุฌุงุก ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.</p>';
                    }
                } catch (error) {
                    console.error('Error generating vulnerability ideas:', error);
                    vulnerabilityIdeasOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุฎุงุฏู. ุงูุฑุฌุงุก ุงูุชุฃูุฏ ูู ุตุญุฉ ููุชุงุญ API ุงูุฎุงุต ุจู ูุงููุญุงููุฉ ูุงุญูุงู.</p>';
                } finally {
                    generateVulnerabilityIdeasBtnText.classList.remove('hidden');
                    generateVulnerabilityIdeasSpinner.classList.add('hidden');
                }
            });

            // Vulnerability Impact Assessor Logic
            const vulnerabilityDescriptionInput = document.getElementById('vulnerabilityDescriptionInput');
            const assessVulnerabilityImpactBtn = document.getElementById('assessVulnerabilityImpactBtn');
            const vulnerabilityImpactOutput = document.getElementById('vulnerabilityImpactOutput');
            const assessVulnerabilityImpactBtnText = document.getElementById('assessVulnerabilityImpactBtnText');
            const assessVulnerabilityImpactSpinner = document.getElementById('assessVulnerabilityImpactSpinner');

            assessVulnerabilityImpactBtn.addEventListener('click', async () => {
                const vulnerabilityDescription = sanitizeInput(vulnerabilityDescriptionInput.value.trim());
                if (!vulnerabilityDescription) {
                    vulnerabilityImpactOutput.innerHTML = '<p class="text-red-500">ุงูุฑุฌุงุก ุฅุฏุฎุงู ูุตู ููุซุบุฑุฉ ูุชูููู ุชุฃุซูุฑูุง.</p>';
                    return;
                }

                const prompt = `Based on the following vulnerability description, assess its potential impact (e.g., Low, Medium, High, Critical) and provide a brief justification based on common security impact criteria (e.g., data confidentiality, integrity, availability, user interaction, scope). Vulnerability: "${vulnerabilityDescription}"`;

                assessVulnerabilityImpactBtnText.classList.add('hidden');
                assessVulnerabilityImpactSpinner.classList.remove('hidden');
                vulnerabilityImpactOutput.innerHTML = '<p class="text-gray-500 flex items-center justify-center"><span class="loading-spinner"></span> ุฌุงุฑู ุชูููู ุงูุชุฃุซูุฑ...</p>';

                try {
                    const apiKey = "AIzaSyAJijq2Es_fHJwSyshTG9rjs3h5oO62k-I"; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent`;
                    
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    
                    const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 
                                    'Content-Type': 'application/json',
                                    'X-goog-api-key': apiKey 
                                },
                                body: JSON.stringify(payload)
                            });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = sanitizeInput(result.candidates[0].content.parts[0].text);
                        vulnerabilityImpactOutput.innerHTML = `<p>${text.replace(/\n/g, '<br>')}</p>`;
                    } else {
                        vulnerabilityImpactOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ูู ุชูููู ุงูุชุฃุซูุฑ. ุงูุฑุฌุงุก ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.</p>';
                    }
                } catch (error) {
                    console.error('Error assessing vulnerability impact:', error);
                    vulnerabilityImpactOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุฎุงุฏู. ุงูุฑุฌุงุก ุงูุชุฃูุฏ ูู ุตุญุฉ ููุชุงุญ API ุงูุฎุงุต ุจู ูุงููุญุงููุฉ ูุงุญูุงู.</p>';
                } finally {
                    assessVulnerabilityImpactBtnText.classList.remove('hidden');
                    assessVulnerabilityImpactSpinner.classList.add('hidden');
                }
            });

            // Report Title/Summary Generator Logic
            const fullReportBodyInput = document.getElementById('fullReportBodyInput');
            const generateReportTitleSummaryBtn = document.getElementById('generateReportTitleSummaryBtn');
            const reportTitleSummaryOutput = document.getElementById('reportTitleSummaryOutput');
            const generateReportTitleSummaryBtnText = document.getElementById('generateReportTitleSummaryBtnText');
            const generateReportTitleSummarySpinner = document.getElementById('generateReportTitleSummarySpinner');

            generateReportTitleSummaryBtn.addEventListener('click', async () => {
                const reportBody = sanitizeInput(fullReportBodyInput.value.trim());
                if (!reportBody) {
                    reportTitleSummaryOutput.innerHTML = '<p class="text-red-500">ุงูุฑุฌุงุก ูุตู ูุต ุงูุชูุฑูุฑ ูุงููุงู ูุชูููุฏ ุงูุนูุงููู ูุงูููุฎุตุงุช.</p>';
                    return;
                }

                const prompt = `Given the following bug bounty report body, suggest 3 concise and impactful titles and a brief, compelling summary (2-3 sentences). Focus on clarity, highlighting the core issue, and making it appealing for a security team. Report Body: "${reportBody}"`;

                generateReportTitleSummaryBtnText.classList.add('hidden');
                generateReportTitleSummarySpinner.classList.remove('hidden');
                reportTitleSummaryOutput.innerHTML = '<p class="text-gray-500 flex items-center justify-center"><span class="loading-spinner"></span> ุฌุงุฑู ุชูููุฏ ุงูุนูุงููู ูุงูููุฎุตุงุช...</p>';

                try {
                    const apiKey = "AIzaSyAJijq2Es_fHJwSyshTG9rjs3h5oO62k-I"; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent`;
                    
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    
                    const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 
                                    'Content-Type': 'application/json',
                                    'X-goog-api-key': apiKey 
                                },
                                body: JSON.stringify(payload)
                            });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = sanitizeInput(result.candidates[0].content.parts[0].text);
                        reportTitleSummaryOutput.innerHTML = `<p>${text.replace(/\n/g, '<br>')}</p>`;
                    } else {
                        reportTitleSummaryOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ูู ุชูููุฏ ุงูุนูุงููู ูุงูููุฎุตุงุช. ุงูุฑุฌุงุก ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.</p>';
                    }
                } catch (error) {
                    console.error('Error generating report title/summary:', error);
                    reportTitleSummaryOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุฎุงุฏู. ุงูุฑุฌุงุก ุงูุชุฃูุฏ ูู ุตุญุฉ ููุชุงุญ API ุงูุฎุงุต ุจู ูุงููุญุงููุฉ ูุงุญูุงู.</p>';
                } finally {
                    generateReportTitleSummaryBtnText.classList.remove('hidden');
                    generateReportTitleSummarySpinner.classList.add('hidden');
                }
            });


            const assessReportQualityBtn = document.getElementById('assessReportQualityBtn');
            const reportDraftTextarea = document.getElementById('reportDraftTextarea');
            const reportQualityOutput = document.getElementById('reportQualityOutput');
            const assessReportQualityBtnText = document.getElementById('assessReportQualityBtnText');
            const assessReportQualitySpinner = document.getElementById('assessReportQualitySpinner');

            assessReportQualityBtn.addEventListener('click', async () => {
                const reportText = sanitizeInput(reportDraftTextarea.value.trim()); // Sanitize input
                if (!reportText) {
                    reportQualityOutput.innerHTML = '<p class="text-red-500">ุงูุฑุฌุงุก ูุตู ูุณูุฏุฉ ุงูุชูุฑูุฑ ูุชูููููุง.</p>';
                    return;
                }

                const prompt = `ููู ุฌูุฏุฉ ุชูุฑูุฑ ุงูุซุบุฑุฉ ุงูุชุงูู ููุฏู ุงูุชุฑุงุญุงุช ูุชุญุณููู ููููู ุฃูุซุฑ ูุถูุญูุง ูุงุญุชุฑุงููุฉุ ูุน ุงูุชุฑููุฒ ุนูู ุงูููุงุท ุงูุชู ุชุถูู ุงูุฏูุน ุงูุฌูุฏ. ุชุฃูุฏ ูู ุชุบุทูุฉ ุงูุนูุงุตุฑ ุงูุฃุณุงุณูุฉ ูุซู ุงููุตูุ ุฎุทูุงุช ุฅุนุงุฏุฉ ุงูุฅูุชุงุฌุ ุงูุชุฃุซูุฑุ ูุงูุงูุชุฑุงุญุงุช. ุงูุชูุฑูุฑ: "${reportText}"`;

                assessReportQualityBtnText.classList.add('hidden');
                assessReportQualitySpinner.classList.remove('hidden');
                reportQualityOutput.innerHTML = '<p class="text-gray-500 flex items-center justify-center"><span class="loading-spinner"></span> ุฌุงุฑู ุชูููู ุงูุชูุฑูุฑ...</p>';

                try {
                    const apiKey = "AIzaSyAJijq2Es_fHJwSyshTG9rjs3h5oO62k-I"; // <--- ุถุน ููุชุงุญ API ุงูุฎุงุต ุจู ููุง

                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent`;
                    
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    
                    const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 
                                    'Content-Type': 'application/json',
                                    'X-goog-api-key': apiKey 
                                },
                                body: JSON.stringify(payload)
                            });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = sanitizeInput(result.candidates[0].content.parts[0].text); // Sanitize output
                        reportQualityOutput.innerHTML = `<p>${text.replace(/\n/g, '<br>')}</p>`;
                    } else {
                        reportQualityOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ูู ุชูููู ุงูุชูุฑูุฑ. ุงูุฑุฌุงุก ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.</p>';
                    }
                } catch (error) {
                    console.error('Error assessing report quality:', error);
                    reportQualityOutput.innerHTML = '<p class="text-red-500">ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุงุชุตุงู ุจุงูุฎุงุฏู. ุงูุฑุฌุงุก ุงูุชุฃูุฏ ูู ุตุญุฉ ููุชุงุญ API ุงูุฎุงุต ุจู ูุงููุญุงููุฉ ูุงุญูุงู.</p>';
                } finally {
                    assessReportQualityBtnText.classList.remove('hidden');
                    assessReportQualitySpinner.classList.add('hidden');
                }
            });
        });
    </script>

</body>
</html>
